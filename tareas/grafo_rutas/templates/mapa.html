<!DOCTYPE html>
<html>
<head>
    <title>Sistema de Rutas - Bolivia</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='estilo.css') }}">
</head>
<body>
    <div class="container">
        <h1>🗺️ Sistema de Rutas de Bolivia</h1>
        
        <div class="layout">
            <!-- SIDEBAR IZQUIERDO - CONTROLES -->
            <div class="sidebar left-sidebar">
                <!-- FORMULARIO AGREGAR CIUDAD -->
                <div class="form-agregar-ciudad">
                    <h3>➕ Agregar Ciudad</h3>
                    <form id="form-ciudad">
                        <input type="text" id="nombre-ciudad" placeholder="Nombre de ciudad" required>
                        <input type="number" id="x-ciudad" placeholder="Coordenada X" min="0" max="800" required>
                        <input type="number" id="y-ciudad" placeholder="Coordenada Y" min="0" max="600" required>
                        <button type="submit">Agregar Ciudad</button>
                    </form>
                </div>

                <!-- FORMULARIO AGREGAR RUTA -->
                <div class="form-agregar-ciudad">
                    <h3>🛣️ Agregar Ruta</h3>
                    <form id="form-ruta">
                        <select id="ciudad1-ruta" required>
                            <option value="">Ciudad Origen</option>
                        </select>
                        <select id="ciudad2-ruta" required>
                            <option value="">Ciudad Destino</option>
                        </select>
                        <input type="number" id="peso-ruta" placeholder="Distancia (km)" min="1" required>
                        <button type="submit">Agregar Ruta</button>
                    </form>
                </div>

                <!-- CONTROLES CALCULAR RUTA -->
                <div class="controles">
                    <h3>📍 Calcular Ruta</h3>
                    <select id="origen">
                        <option value="">Ciudad Origen</option>
                    </select>
                    <select id="destino">
                        <option value="">Ciudad Destino</option>
                    </select>
                    <div class="botones-ruta">
                        <button onclick="calcularRuta()">Calcular Ruta</button>
                        <button onclick="limpiarRuta()">Limpiar</button>                        
                    </div>
                </div>

                <!-- INFO ESTADO -->
                <div class="info-estado">
                    <h3>📊 Estado</h3>
                    <div class="estado-item">
                        <strong>Estado:</strong> <span id="estado">Cargando...</span>
                    </div>
                    <div class="estado-item">
                        <strong>Ciudades:</strong> <span id="contador-ciudades">0</span>
                    </div>
                    <div class="estado-item">
                        <strong>Rutas:</strong> <span id="contador-rutas">0</span>
                    </div>
                </div>
            </div>

            <!-- MAPA SVG (CENTRO) -->
            <div class="mapa-container">
                <svg id="mapa" width="1200" height="1000" viewBox="0 0 1200 1000">
                        <!-- ✅ AGREGAR FONDO PERMANENTE -->
                    <rect x="0" y="0" width="1200" height="1000" fill="#bad6db" rx="8"/>
                    <g id="rutas"></g>
                    <g id="ciudades"></g>
                    <g id="ruta-calculada"></g>
                </svg>
            </div>

            <!-- SIDEBAR DERECHO - INFORMACIÓN -->
            <div class="sidebar right-sidebar">
                <!-- RESULTADOS -->
                <div class="resultado-section">
                    <h3>📋 Resultados</h3>
                    <div id="resultado">
                        ✅ Sistema listo para calcular rutas
                    </div>
                </div>

                <!-- LISTA CIUDADES -->
                <div class="ciudades-lista">
                    <h3>🏙️ Ciudades</h3>
                    <div id="lista-ciudades"></div>
                </div>

                <!-- LISTA RUTAS -->
                <div class="rutas-lista">
                    <h3>🛣️ Rutas</h3>
                    <div id="lista-rutas"></div>
                </div>

                <!-- CONTROLES SVG - Cerrar -->
                <div class="controles">                    
                    <div class="botones-ruta">                        
                        <button onclick="exportarMapa()">📸 Exportar SVG</button>
                        <button onclick="cerrarAplicacion()">❌ Salir </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='rutas.js') }}"></script>
</body>
</html>